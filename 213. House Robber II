class Solution:
    def rob(self, nums: List[int]) -> int:
        n=len(nums)
        if(n==1):
            return nums[0]
        if(n==2):
            return max(nums[0],nums[1])
        def dp_solve(nums):
            memo={}
            def dp(i):
                if(i<0):
                    return 0
                if i in memo:
                    return memo[i]
                if(i==0):
                    memo[0]= nums[0]
                    return memo[0]
                else:
                    memo[i]= max(dp(i-1),dp(i-2)+nums[i])
                return memo[i]
            return dp(len(nums)-1)
        case1=dp_solve(nums[:-1])
        case2=dp_solve(nums[1:])
        return max(case1,case2)   
